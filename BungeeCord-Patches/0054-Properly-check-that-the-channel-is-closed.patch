From cb1b3a3754f2f83d26689db9539deeae6907abe7 Mon Sep 17 00:00:00 2001
From: xDark <aleshkailyashevich@gmail.com>
Date: Sat, 6 Jul 2019 13:54:40 +0300
Subject: [PATCH] Properly check that the channel is closed


diff --git a/proxy/src/main/java/net/md_5/bungee/netty/ChannelWrapper.java b/proxy/src/main/java/net/md_5/bungee/netty/ChannelWrapper.java
index 4882b8ed..78d751b0 100644
--- a/proxy/src/main/java/net/md_5/bungee/netty/ChannelWrapper.java
+++ b/proxy/src/main/java/net/md_5/bungee/netty/ChannelWrapper.java
@@ -49,7 +49,7 @@ public class ChannelWrapper
 
     public void write(Object packet)
     {
-        if ( !closed )
+        if ( !closed && ch.isActive() ) // Waterfall
         {
             if ( packet instanceof PacketWrapper )
             {
-- 
2.22.0.windows.1

